(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{jkDv:function(t,e,i){"use strict";i.r(e);var o=i("ofXK"),r=i("PCNd"),c=i("tyNb"),n=i("fXoL"),s=i("mwRl"),d=i("AytR"),b=i("tk/3");let a=(()=>{class t{constructor(t){this.http=t,this.baseUrl=d.a.apiUrl}createProduct(t){return this.http.post(this.baseUrl+"products",t)}updateProduct(t,e){return this.http.put(this.baseUrl+"products/"+e,t)}deleteProduct(t){return this.http.delete(this.baseUrl+"products/"+t)}uploadImage(t,e){const i=new FormData;return i.append("photo",t,"image.png"),this.http.put(this.baseUrl+"products/"+e+"/photo",i,{reportProgress:!0,observe:"events"})}deleteProductPhoto(t,e){return this.http.delete(this.baseUrl+"products/"+e+"/photo/"+t)}setMainPhoto(t,e){return this.http.post(this.baseUrl+"products/"+e+"/photo/"+t,{})}}return t.\u0275fac=function(e){return new(e||t)(n.bc(b.b))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("/gyc"),u=i("a4eG");const l=function(t){return["edit",t]};function g(t,e){if(1&t){const t=n.Yb();n.Xb(0,"tr"),n.Xb(1,"td",23),n.Nc(2),n.Wb(),n.Xb(3,"td"),n.Xb(4,"div",17),n.Sb(5,"img",24),n.Wb(),n.Wb(),n.Xb(6,"th",23),n.Xb(7,"h5"),n.Nc(8),n.Wb(),n.Wb(),n.Xb(9,"td",23),n.Nc(10),n.kc(11,"currency"),n.Wb(),n.Xb(12,"td",23),n.Xb(13,"button",25),n.Nc(14,"Edit"),n.Wb(),n.Wb(),n.Xb(15,"td",23),n.Xb(16,"button",26),n.fc("click",(function(i){n.Dc(t);const o=e.$implicit;return n.jc(2).deleteProduct(o.id)})),n.Nc(17,"Delete"),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=e.$implicit;n.Cb(2),n.Oc(t.id),n.Cb(3),n.qc("src",t.pictureUrl||"/assets/images/placeholder.png",n.Fc),n.qc("alt",t.name),n.Cb(3),n.Oc(t.name),n.Cb(2),n.Oc(n.mc(11,6,t.price,"R")),n.Cb(3),n.pc("routerLink",n.tc(9,l,t.id))}}function h(t,e){if(1&t){const t=n.Yb();n.Xb(0,"div",27),n.Xb(1,"app-pager",28),n.fc("pageChanged",(function(e){return n.Dc(t),n.jc(2).onPageChanged(e)})),n.Wb(),n.Wb()}if(2&t){const t=n.jc(2);n.Cb(1),n.pc("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber)("totalCount",t.totalCount)}}const f=function(){return["/admin/create"]};function m(t,e){if(1&t&&(n.Xb(0,"section",6),n.Xb(1,"div",7),n.Xb(2,"div",8),n.Xb(3,"div",9),n.Xb(4,"div",10),n.Xb(5,"header",11),n.Nc(6,"Services List"),n.Wb(),n.Xb(7,"button",12),n.Nc(8,"Create new service"),n.Wb(),n.Wb(),n.Sb(9,"app-paging-header",13),n.Xb(10,"div",14),n.Xb(11,"table",15),n.Xb(12,"thead"),n.Xb(13,"tr"),n.Xb(14,"th",16),n.Xb(15,"div",17),n.Nc(16,"Id"),n.Wb(),n.Wb(),n.Xb(17,"th",16),n.Xb(18,"div",18),n.Nc(19,"Service"),n.Wb(),n.Wb(),n.Xb(20,"th",16),n.Xb(21,"div",19),n.Nc(22,"Name"),n.Wb(),n.Wb(),n.Xb(23,"th",16),n.Xb(24,"div",20),n.Nc(25,"Price"),n.Wb(),n.Wb(),n.Xb(26,"th",16),n.Xb(27,"div",20),n.Nc(28,"Edit"),n.Wb(),n.Wb(),n.Xb(29,"th",16),n.Xb(30,"div",20),n.Nc(31,"Delete"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(32,"tbody"),n.Lc(33,g,18,11,"tr",21),n.Wb(),n.Wb(),n.Wb(),n.Lc(34,h,2,3,"div",22),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&t){const t=n.jc();n.Cb(7),n.pc("routerLink",n.sc(6,f)),n.Cb(2),n.pc("totalCount",t.totalCount)("pageSize",t.shopParams.pageSize)("pageNumber",t.shopParams.pageNumber),n.Cb(24),n.pc("ngForOf",t.products),n.Cb(1),n.pc("ngIf",t.totalCount>0)}}const v=function(){return{exact:!0}};let X=(()=>{class t{constructor(t,e){this.shopService=t,this.adminService=e,this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getProducts()}getProducts(t=!1){this.shopService.getProducts(t).subscribe(t=>{this.products=t.data,this.totalCount=t.count},t=>{console.log(t)})}onPageChanged(t){const e=this.shopService.getShopParams();e.pageNumber!==t&&(e.pageNumber=t,this.shopService.setShopParams(e),this.getProducts(!0))}deleteProduct(t){this.adminService.deleteProduct(t).subscribe(e=>{this.products.splice(this.products.findIndex(e=>e.id===t),1),this.totalCount--})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(s.a),n.Rb(a))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-admin"]],decls:9,vars:3,consts:[["id","sidebar",1,"sidebar"],[1,""],[1,"nav-item"],["routerLink","/admin","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/orders","routerLinkActive","active",1,"nav-link"],["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row",2,"background","rgba( 80, 75, 75, 0.25 )","box-shadow","0 8px 32px 0 rgba( 31, 38, 135, 0.37 )","backdrop-filter","blur( 10.0px )","-webkit-backdrop-filter","blur( 10.0px )","border-radius","10px","border","1px solid rgba( 255, 255, 255, 0.18 )","color","white"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3",2,"color","white"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table",2,"color","white"],["scope","col"],[1,"p-2"],[1,"p-2","text-uppercase",2,"color","white"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(t,e){1&t&&(n.Xb(0,"section",0),n.Xb(1,"ul",1),n.Xb(2,"li",2),n.Xb(3,"a",3),n.Nc(4," Services "),n.Wb(),n.Wb(),n.Xb(5,"li",2),n.Xb(6,"a",4),n.Nc(7," Orders "),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Lc(8,m,35,7,"section",5)),2&t&&(n.Cb(3),n.pc("routerLinkActiveOptions",n.sc(2,v)),n.Cb(5),n.pc("ngIf",e.products))},directives:[c.f,c.e,o.n,c.d,p.a,o.m,u.a],pipes:[o.d],styles:['.sidebar[_ngcontent-%COMP%]{background:rgba(80,75,75,.25);box-shadow:0 8px 32px 0 rgba(31,38,135,.37);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:10px;border:1px solid hsla(0,0%,100%,.18);width:20%;padding:10px 5px;float:left;margin:0 25px}ul[_ngcontent-%COMP%]{list-style-type:none}.nav-link[_ngcontent-%COMP%]{color:#fff!important;font-weight:600!important;line-height:60px!important}.nav-link.active[_ngcontent-%COMP%], .nav-link[_ngcontent-%COMP%]:hover{color:#fff!important;-webkit-transition:.6s;transition:.6s}.nav-item[_ngcontent-%COMP%]{position:relative}.nav-item[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]:before{content:"";position:absolute;width:74%;height:2px;bottom:16px;left:16px;background:#fff;-webkit-transition:all .3s ease-in-out 0s;transition:all .3s ease-in-out 0s}']}),t})();class W{constructor(t){this.name="",this.description="",this.price=0,this.pictureUrl="",Object.assign(this,t)}}var C=i("cp0P"),P=i("oW1M"),y=i("3Pt+"),x=i("9nqD");function k(t,e){1&t&&(n.Xb(0,"div"),n.Nc(1," Service Name is required "),n.Wb())}function N(t,e){if(1&t&&(n.Xb(0,"div",21),n.Lc(1,k,2,0,"div",22),n.Wb()),2&t){n.jc();const t=n.zc(7);n.Cb(1),n.pc("ngIf",t.errors.required)}}function w(t,e){1&t&&(n.Xb(0,"div"),n.Nc(1," Service price is required "),n.Wb())}function M(t,e){1&t&&(n.Xb(0,"div"),n.Nc(1," Service price needs to be decimal value "),n.Wb())}function S(t,e){1&t&&(n.Xb(0,"div"),n.Nc(1," Service price must be greater than zero "),n.Wb())}function I(t,e){if(1&t&&(n.Xb(0,"div",21),n.Lc(1,w,2,0,"div",22),n.Lc(2,M,2,0,"div",22),n.Lc(3,S,2,0,"div",22),n.Wb()),2&t){n.jc();const t=n.zc(13);n.Cb(1),n.pc("ngIf",t.errors.required),n.Cb(1),n.pc("ngIf",t.errors.pattern),n.Cb(1),n.pc("ngIf",t.errors.min)}}function O(t,e){1&t&&(n.Xb(0,"div"),n.Nc(1," Service price is required "),n.Wb())}function j(t,e){if(1&t&&(n.Xb(0,"div",21),n.Lc(1,O,2,0,"div",22),n.Wb()),2&t){n.jc();const t=n.zc(21);n.Cb(1),n.pc("ngIf",t.errors.required)}}function L(t,e){if(1&t&&(n.Xb(0,"option",23),n.Nc(1),n.Wb()),2&t){const t=e.$implicit,i=n.jc();n.pc("selected",i.product.productBrandId===t.id)("ngValue",t.id),n.Cb(1),n.Oc(t.name)}}function F(t,e){if(1&t&&(n.Xb(0,"option",23),n.Nc(1),n.Wb()),2&t){const t=e.$implicit,i=n.jc();n.pc("selected",i.product.productTypeId===t.id)("ngValue",t.id),n.Cb(1),n.Oc(t.name)}}const z=function(t){return{"is-invalid":t}};let R=(()=>{class t{constructor(t,e,i){this.route=t,this.adminService=e,this.router=i}ngOnInit(){}onSubmit(t){if("edit"===this.route.snapshot.url[0].path){const e=Object.assign(Object.assign(Object.assign({},this.product),t),{price:+t.price});this.adminService.updateProduct(e,+this.route.snapshot.paramMap.get("id")).subscribe(t=>{this.router.navigate(["/admin"])})}else{const e=Object.assign(Object.assign({},t),{price:+t.price});this.adminService.createProduct(e).subscribe(t=>{this.router.navigate(["/admin"])})}}updatePrice(t){this.product.price=t}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(c.a),n.Rb(a),n.Rb(c.c))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-edit-product-form"]],inputs:{product:"product",brands:"brands",types:"types"},decls:36,vars:23,consts:[[2,"background","rgba(255, 255, 255, 0.1)","overflow","hidden","backdrop-filter","blur(40px)","border","1px solid rgba(255, 255, 255, 0.5)","border-radius","10px",3,"ngSubmit"],["productForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["required","","type","text","id","name","placeholder","Product Name","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","price"],["required","","type","text","id","price","placeholder","Price","currencyMask","","name","price","pattern","^\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$","min","0.01",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["price","ngModel"],[1,"form-group","col-md-12"],["for","description"],["required","","id","description","name","description","rows","3",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["description","ngModel"],["for","brand"],["id","brand","name","productBrandId","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"selected","ngValue",4,"ngFor","ngForOf"],["for","type"],["id","type","name","productTypeId","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"selected","ngValue"]],template:function(t,e){if(1&t){const t=n.Yb();n.Xb(0,"form",0,1),n.fc("ngSubmit",(function(i){n.Dc(t);const o=n.zc(1);return e.onSubmit(o.valid&&o.value)})),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xb(4,"label",4),n.Nc(5,"Service Name"),n.Wb(),n.Xb(6,"input",5,6),n.fc("ngModelChange",(function(t){return e.product.name=t})),n.Wb(),n.Lc(8,N,2,1,"div",7),n.Wb(),n.Xb(9,"div",3),n.Xb(10,"label",8),n.Nc(11,"Price"),n.Wb(),n.Xb(12,"input",9,10),n.fc("ngModelChange",(function(t){return e.updatePrice(t-0)})),n.kc(14,"number"),n.Wb(),n.Lc(15,I,4,3,"div",7),n.Wb(),n.Wb(),n.Xb(16,"div",2),n.Xb(17,"div",11),n.Xb(18,"label",12),n.Nc(19,"Description"),n.Wb(),n.Xb(20,"textarea",13,14),n.fc("ngModelChange",(function(t){return e.product.description=t})),n.Wb(),n.Lc(22,j,2,1,"div",7),n.Wb(),n.Wb(),n.Xb(23,"div",2),n.Xb(24,"div",3),n.Xb(25,"label",15),n.Nc(26,"Brand"),n.Wb(),n.Xb(27,"select",16),n.fc("ngModelChange",(function(t){return e.product.productBrandId=t})),n.Lc(28,L,2,3,"option",17),n.Wb(),n.Wb(),n.Xb(29,"div",3),n.Xb(30,"label",18),n.Nc(31,"Type"),n.Wb(),n.Xb(32,"select",19),n.fc("ngModelChange",(function(t){return e.product.productTypeId=t})),n.Lc(33,F,2,3,"option",17),n.Wb(),n.Wb(),n.Wb(),n.Xb(34,"button",20),n.Nc(35,"Submit"),n.Wb(),n.Wb()}if(2&t){const t=n.zc(1),i=n.zc(7),o=n.zc(13),r=n.zc(21);n.Cb(6),n.pc("ngClass",n.tc(17,z,i.invalid&&(i.dirty||i.touched)))("ngModel",e.product.name),n.Cb(2),n.pc("ngIf",i.invalid&&(i.dirty||i.touched)),n.Cb(4),n.pc("ngClass",n.tc(19,z,o.invalid&&(o.dirty||o.touched)))("ngModel",n.mc(14,14,e.product.price-0,"1.2-2")),n.Cb(3),n.pc("ngIf",o.invalid&&(o.dirty||o.touched)),n.Cb(5),n.pc("ngClass",n.tc(21,z,r.invalid&&(r.dirty||r.touched)))("ngModel",e.product.description),n.Cb(2),n.pc("ngIf",r.invalid&&(r.dirty||r.touched)),n.Cb(5),n.pc("ngModel",e.product.productBrandId),n.Cb(1),n.pc("ngForOf",e.brands),n.Cb(4),n.pc("ngModel",e.product.productTypeId),n.Cb(1),n.pc("ngForOf",e.types),n.Cb(1),n.pc("disabled",!t.valid)}},directives:[y.y,y.n,y.o,y.b,y.u,o.l,y.m,y.p,o.n,x.a,y.r,y.v,o.m,y.q,y.x],pipes:[o.g],styles:["#blur[_ngcontent-%COMP%]{background:rgba(80,75,75,.25);box-shadow:0 8px 32px 0 rgba(31,38,135,.37);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:10px;border:1px solid hsla(0,0%,100%,.18);color:#fff}"]}),t})();var U=i("5eHb"),q=i("rIor"),D=i("kvL/");function T(t,e){if(1&t){const t=n.Yb();n.Vb(0),n.Sb(1,"img",7),n.Xb(2,"button",8),n.fc("click",(function(e){return n.Dc(t),n.jc().onUpload()})),n.Nc(3,"Upload Image"),n.Wb(),n.Ub()}if(2&t){const t=n.jc();n.Cb(1),n.pc("src",t.croppedImage,n.Fc)}}let E=(()=>{class t{constructor(){this.addFile=new n.o,this.files=[],this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){}fileChangeEvent(t){this.imageChangedEvent=t}imageCropped(t){this.croppedImage=t.base64}onSelect(t){this.files=[],this.files.push(...t.addedFiles),this.fileChangeEvent(this.files[0])}onUpload(){console.log(Object(q.c)(this.croppedImage)),this.addFile.emit(Object(q.c)(this.croppedImage))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Lb({type:t,selectors:[["app-photo-widget"]],outputs:{addFile:"addFile"},decls:17,vars:5,consts:[[1,"row"],[1,"col-4"],["ngx-dropzone","",1,"custom-dropzone",3,"change"],[1,"fa","fa-upload","fa-4x"],[1,"col-4","img-preview"],["format","png",1,"img-fluid",3,"imageChangedEvent","imageFile","maintainAspectRatio","aspectRatio","imageCropped"],[4,"ngIf"],[1,"img-fluid",3,"src"],[1,"btn-block","btn-primary",3,"click"]],template:function(t,e){1&t&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Xb(2,"h3"),n.Nc(3,"Step 1 - Add Photo"),n.Wb(),n.Xb(4,"div",2),n.fc("change",(function(t){return e.onSelect(t)})),n.Xb(5,"ngx-dropzone-label"),n.Sb(6,"i",3),n.Xb(7,"h4"),n.Nc(8,"Drop image here"),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Xb(9,"div",4),n.Xb(10,"h3"),n.Nc(11,"Step 2 - Resize image"),n.Wb(),n.Xb(12,"image-cropper",5),n.fc("imageCropped",(function(t){return e.imageCropped(t)})),n.Wb(),n.Wb(),n.Xb(13,"div",1),n.Xb(14,"h3"),n.Nc(15,"Step 3 - Preview & Upload"),n.Wb(),n.Lc(16,T,4,1,"ng-container",6),n.Wb(),n.Wb()),2&t&&(n.Cb(12),n.pc("imageChangedEvent",e.imageChangedEvent)("imageFile",e.files[0])("maintainAspectRatio",!0)("aspectRatio",16/9),n.Cb(4),n.pc("ngIf",e.croppedImage))},directives:[D.a,D.c,q.a,o.n],styles:[".custom-dropzone[_ngcontent-%COMP%]{border:3px dashed #eee;border-radius:5px;padding-top:30px;text-align:center;height:200px}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:3px solid green}"]}),t})();function _(t,e){if(1&t){const t=n.Yb();n.Xb(0,"div",7),n.Xb(1,"div",8),n.Sb(2,"img",9),n.Xb(3,"div",10),n.Xb(4,"button",11),n.fc("click",(function(i){n.Dc(t);const o=e.$implicit;return n.jc(2).setMainPhoto(o.id)})),n.Nc(5,"Set Main "),n.Wb(),n.Xb(6,"button",12),n.fc("click",(function(i){n.Dc(t);const o=e.$implicit;return n.jc(2).deletePhoto(o.id)})),n.Sb(7,"i",13),n.Nc(8,"\xa0\xa0\xa0\xa0\xa0\xa0 "),n.Wb(),n.Wb(),n.Wb(),n.Wb()}if(2&t){const t=e.$implicit;n.Cb(2),n.qc("src",t.pictureUrl,n.Fc),n.qc("alt",t.fileName),n.Cb(2),n.Eb(t.isMain?"btn btn-success":"btn btn-outline-success"),n.pc("disabled",t.isMain),n.Cb(2),n.pc("disabled",t.isMain)}}function A(t,e){if(1&t){const t=n.Yb();n.Vb(0),n.Xb(1,"div",3),n.Xb(2,"h3"),n.Nc(3,"Service Photos"),n.Wb(),n.Xb(4,"button",4),n.fc("click",(function(e){return n.Dc(t),n.jc().addPhotoModeToggle()})),n.Nc(5," Add New Photo "),n.Wb(),n.Wb(),n.Xb(6,"div",5),n.Lc(7,_,9,7,"div",6),n.Wb(),n.Ub()}if(2&t){const t=n.jc();n.Cb(7),n.pc("ngForOf",null==t.product?null:t.product.photos)}}function B(t,e){if(1&t&&(n.Xb(0,"div",18),n.Nc(1,"\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),n.Xb(2,"div",19),n.Nc(3),n.Wb(),n.Nc(4,"\n\xa0\xa0\xa0\xa0\xa0\xa0"),n.Wb()),2&t){const t=n.jc(2);n.Cb(2),n.Kc("width",t.progress,"%"),n.Cb(1),n.Pc("\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",t.progress,"%\n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0")}}function V(t,e){if(1&t){const t=n.Yb();n.Vb(0),n.Xb(1,"div",3),n.Xb(2,"h3",14),n.Nc(3,"Add new service image"),n.Wb(),n.Xb(4,"button",15),n.fc("click",(function(e){return n.Dc(t),n.jc().addPhotoModeToggle()})),n.Nc(5,"Cancel"),n.Wb(),n.Wb(),n.Nc(6,"\n\xa0\xa0\xa0\xa0\xa0\xa0"),n.Lc(7,B,5,3,"div",16),n.Xb(8,"app-photo-widget",17),n.fc("addFile",(function(e){return n.Dc(t),n.jc().uploadFile(e)})),n.Wb(),n.Ub()}if(2&t){const t=n.jc();n.Cb(7),n.pc("ngIf",t.progress>0)}}let $=(()=>{class t{constructor(t,e){this.adminService=t,this.toast=e,this.progress=0,this.addPhotoMode=!1}ngOnInit(){}addPhotoModeToggle(){this.addPhotoMode=!this.addPhotoMode}uploadFile(t){this.adminService.uploadImage(t,this.product.id).subscribe(t=>{switch(t.type){case b.d.UploadProgress:this.progress=Math.round(t.loaded/t.total*100);break;case b.d.Response:this.product=t.body,setTimeout(()=>{this.progress=0,this.addPhotoMode=!1},1500)}},t=>{this.toast.error(t.errors?t.errors[0]:"Problem uploading image"),this.progress=0})}deletePhoto(t){this.adminService.deleteProductPhoto(t,this.product.id).subscribe(()=>{const e=this.product.photos.findIndex(e=>e.id===t);this.product.photos.splice(e,1)},t=>{this.toast.error("Problem deleting photo"),console.log(t)})}setMainPhoto(t){this.adminService.setMainPhoto(t,this.product.id).subscribe(t=>{this.product=t})}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(a),n.Rb(U.b))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-edit-product-photos"]],inputs:{product:"product"},decls:4,vars:2,consts:[[1,"py-5"],[1,"container"],[4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"card"],["width","100%","height","225",1,"card-img-top",3,"src","alt"],[1,"btn-group",2,"width","100%"],["type","button",2,"width","50%",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger",2,"width","50%",3,"disabled","click"],[1,"fa","fa-trash"],[1,"text-primary"],[1,"btn","btn-outline-secondary",3,"click"],["class","progress form-group",4,"ngIf"],[3,"addFile"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"]],template:function(t,e){1&t&&(n.Xb(0,"div",0),n.Xb(1,"div",1),n.Lc(2,A,8,1,"ng-container",2),n.Lc(3,V,9,1,"ng-container",2),n.Wb(),n.Wb()),2&t&&(n.Cb(2),n.pc("ngIf",!e.addPhotoMode),n.Cb(1),n.pc("ngIf",e.addPhotoMode))},directives:[o.n,o.m,E],styles:[""]}),t})(),Y=(()=>{class t{constructor(t,e,i,o){this.adminService=t,this.shopService=e,this.route=i,this.router=o,this.productFormValues=new W}ngOnInit(){const t=this.getBrands(),e=this.getTypes();Object(C.a)([e,t]).subscribe(t=>{this.types=t[0],this.brands=t[1]},t=>{console.log(t)},()=>{"edit"===this.route.snapshot.url[0].path&&this.loadProduct()})}loadProduct(){this.shopService.getProduct(+this.route.snapshot.paramMap.get("id")).subscribe(t=>{const e=this.brands&&this.brands.find(e=>e.name===t.productBrand).id,i=this.types&&this.types.find(e=>e.name===t.productType).id;this.product=t,this.productFormValues=Object.assign(Object.assign({},t),{productBrandId:e,productTypeId:i})})}getBrands(){return this.shopService.getBrands()}getTypes(){return this.shopService.getTypes()}}return t.\u0275fac=function(e){return new(e||t)(n.Rb(a),n.Rb(s.a),n.Rb(c.a),n.Rb(c.c))},t.\u0275cmp=n.Lb({type:t,selectors:[["app-edit-product"]],decls:11,vars:4,consts:[[1,"product-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-12"],["id","blur",1,"tab-panel"],[1,"product-tabset"],["heading","Edit Product"],[1,"col-lg-8"],[3,"product","brands","types"],["heading","Edit Photos"],[3,"product"]],template:function(t,e){1&t&&(n.Xb(0,"section",0),n.Xb(1,"div",1),n.Xb(2,"div",2),n.Xb(3,"div",3),n.Xb(4,"div",4),n.Xb(5,"tabset",5),n.Xb(6,"tab",6),n.Xb(7,"div",7),n.Sb(8,"app-edit-product-form",8),n.Wb(),n.Wb(),n.Xb(9,"tab",9),n.Sb(10,"app-edit-product-photos",10),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb(),n.Wb()),2&t&&(n.Cb(8),n.pc("product",e.productFormValues)("brands",e.brands)("types",e.types),n.Cb(2),n.pc("product",e.product))},directives:[P.l,P.j,R,$],styles:["#blur[_ngcontent-%COMP%]{background:rgba(80,75,75,.25);box-shadow:0 8px 32px 0 rgba(31,38,135,.37);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border-radius:10px;border:1px solid hsla(0,0%,100%,.18);color:#fff}"]}),t})();const J=[{path:"",component:X},{path:"create",component:Y,data:{breadcrumb:"Create"}},{path:"edit/:id",component:Y,data:{breadcrumb:"Edit"}}];let K=(()=>{class t{}return t.\u0275mod=n.Pb({type:t}),t.\u0275inj=n.Ob({factory:function(e){return new(e||t)},imports:[[c.g.forChild(J)],c.g]}),t})();i.d(e,"AdminModule",(function(){return G}));let G=(()=>{class t{}return t.\u0275mod=n.Pb({type:t}),t.\u0275inj=n.Ob({factory:function(e){return new(e||t)},imports:[[o.c,r.a,K]]}),t})()}}]);